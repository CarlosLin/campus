<button id="alertB">Hi</button>
<article id="show-info" class="text">
  <%= render 'detail' %>
</article>
<hr>
<div class="text-info">
  <%= link_to "Home", root_path, class: "btn btn-default" %>
  <%= render 'like' %>
  <% if @post.user == current_user  %>
    <%= link_to "Edit", edit_post_path(@post), class: "btn btn-default" %>
    <%= link_to "Delete", post_path(@post), method: :delete, class: "btn btn-default" %>
  <% end %>
  <%= social_share_button_tag(@post.name, :popup => "true", :url => "http://127.0.0.1:3000/posts/#{@post.id}", :desc => "The best Search") %>
</div>
<h2><%= pluralize(@post.messages.count, "Reply")%></h2>
<% @messages.each do | message| %>
  <div class="message">
    <p class="username"><%= message.user.name %></p>
    <p class="time"><%= time_ago_in_words(message.created_at) %></p>
    <p class="msg"><%= message.msg %></p>
  </div>
<% end %>

<%= render 'messages/form' %>

<script type="text/javascript">
  // var post_id = <%= @post[:id] %>
  // $('#favorited_button').click(function () {
  //   var favorite_id = <%= have_favorites_id_or_not %>
  //   $.ajax({
  //     url: "/posts/"+post_id+"/favorites/"+favorite_id ,
  //     type: 'DELETE',
  //     }).done(function(){
  //       alert(favorite_id);
  //       $('#favorited_button').removeClass('btn-success').addClass('btn-success').html("追蹤");
  //     });
  //   });
  // $('#favorites_button').click(function(){
  //   $.post("/posts/"+post_id+"/favorites").done(function() {
  //     $('#favorites_button').removeClass('btn-default').addClass('btn-success').html("已追蹤");
  //   });
  // });
  $(document).ready(function() {
    var post_id = <%= @post[:id] %>
    var favorite_id = <%= @favorite_id %>
    alertModule.initialize(favorite_id);
    alertModule.likeOrDislike(post_id, favorite_id);
  });
</script>